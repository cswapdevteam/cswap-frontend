{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\lol\\\\Desktop\\\\cswap-core\\\\cswap-frontend\\\\src\\\\views\\\\Profit\\\\components\\\\PoolCard.tsx\",\n    _s = $RefreshSig$();\n\nimport BigNumber from 'bignumber.js';\nimport React, { useCallback, useState } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { Button, IconButton, useModal, AddIcon, Image, Flex, Text } from '@gameswapfinance/uikit';\nimport { useWallet } from '@binance-chain/bsc-use-wallet';\nimport UnlockButton from 'components/UnlockButton';\nimport Label from 'components/Label';\nimport { useERC20 } from 'hooks/useContract';\nimport { useSousApprove } from 'hooks/useApprove';\nimport useI18n from 'hooks/useI18n';\nimport { useSousStake } from 'hooks/useStake';\nimport { useSousUnstake } from 'hooks/useUnstake';\nimport useBlock from 'hooks/useBlock';\nimport { getBalanceNumber } from 'utils/formatBalance';\nimport { useSousHarvest } from 'hooks/useHarvest';\nimport Balance from 'components/Balance';\nimport { QuoteToken, PoolCategory } from 'config/constants/types';\nimport DepositModal from './DepositModal';\nimport WithdrawModal from './WithdrawModal';\nimport CompoundModal from './CompoundModal';\nimport CardTitle from './CardTitle';\nimport Card from './Card';\nimport OldSyrupTitle from './OldSyrupTitle';\nimport HarvestButton from './HarvestButton';\nimport CardFooter from './CardFooter';\nconst RainbowLight = keyframes`\n  0% {\n    background-position: 0% 50%;\n  }\n  50% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0% 50%;\n  }\n`;\nconst StyledCardAccent = styled.div`\n  background: linear-gradient(\n    45deg,\n    rgba(255, 0, 0, 1) 0%,\n    rgba(255, 154, 0, 1) 10%,\n    rgba(208, 222, 33, 1) 20%,\n    rgba(79, 220, 74, 1) 30%,\n    rgba(63, 218, 216, 1) 40%,\n    rgba(47, 201, 226, 1) 50%,\n    rgba(28, 127, 238, 1) 60%,\n    rgba(95, 21, 242, 1) 70%,\n    rgba(186, 12, 248, 1) 80%,\n    rgba(251, 7, 217, 1) 90%,\n    rgba(255, 0, 0, 1) 100%\n  );\n  background-size: 300% 300%;\n  animation: ${RainbowLight} 2s linear infinite;\n  border-radius: 16px;\n  filter: blur(6px);\n  position: absolute;\n  top: -2px;\n  right: -2px;\n  bottom: -2px;\n  left: -2px;\n  z-index: -1;\n`;\n_c = StyledCardAccent;\n\nconst PoolCard = ({\n  pool\n}) => {\n  _s();\n\n  const {\n    sousId,\n    image,\n    tokenName,\n    stakingTokenName,\n    stakingTokenAddress,\n    projectLink,\n    harvest,\n    apy,\n    tokenDecimals,\n    poolCategory,\n    totalStaked,\n    startBlock,\n    endBlock,\n    isFinished,\n    userData,\n    stakingLimit,\n    depositFee\n  } = pool; // Pools using native BNB behave differently than pools using a token\n\n  const isBnbPool = poolCategory === PoolCategory.BINANCE;\n  const TranslateString = useI18n();\n  const stakingTokenContract = useERC20(stakingTokenAddress);\n  const {\n    account\n  } = useWallet();\n  const block = useBlock();\n  const {\n    onApprove\n  } = useSousApprove(stakingTokenContract, sousId);\n  const {\n    onStake\n  } = useSousStake(sousId, isBnbPool);\n  const {\n    onUnstake\n  } = useSousUnstake(sousId);\n  const {\n    onReward\n  } = useSousHarvest(sousId, isBnbPool);\n  const [requestedApproval, setRequestedApproval] = useState(false);\n  const [pendingTx, setPendingTx] = useState(false);\n  const allowance = new BigNumber((userData === null || userData === void 0 ? void 0 : userData.allowance) || 0);\n  const stakingTokenBalance = new BigNumber((userData === null || userData === void 0 ? void 0 : userData.stakingTokenBalance) || 0);\n  const stakedBalance = new BigNumber((userData === null || userData === void 0 ? void 0 : userData.stakedBalance) || 0);\n  const earnings = new BigNumber((userData === null || userData === void 0 ? void 0 : userData.pendingReward) || 0);\n  const blocksUntilStart = Math.max(startBlock - block, 0);\n  const blocksRemaining = Math.max(endBlock - block, 0);\n  const isOldSyrup = stakingTokenName === QuoteToken.SYRUP;\n  const accountHasStakedBalance = (stakedBalance === null || stakedBalance === void 0 ? void 0 : stakedBalance.toNumber()) > 0;\n  const needsApproval = !accountHasStakedBalance && !allowance.toNumber() && !isBnbPool;\n  const isCardActive = isFinished && accountHasStakedBalance;\n  const convertedLimit = new BigNumber(stakingLimit).multipliedBy(new BigNumber(10).pow(tokenDecimals));\n  const [onPresentDeposit] = useModal( /*#__PURE__*/_jsxDEV(DepositModal, {\n    max: stakingLimit && stakingTokenBalance.isGreaterThan(convertedLimit) ? convertedLimit : stakingTokenBalance,\n    onConfirm: onStake,\n    tokenName: stakingLimit ? `${stakingTokenName} (${stakingLimit} max)` : stakingTokenName\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this));\n  const [onPresentCompound] = useModal( /*#__PURE__*/_jsxDEV(CompoundModal, {\n    earnings: earnings,\n    onConfirm: onStake,\n    tokenName: stakingTokenName\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this));\n  const [onPresentWithdraw] = useModal( /*#__PURE__*/_jsxDEV(WithdrawModal, {\n    max: stakedBalance,\n    onConfirm: onUnstake,\n    tokenName: stakingTokenName\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this));\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true);\n      const txHash = await onApprove(); // user rejected tx or didn't go thru\n\n      if (!txHash) {\n        setRequestedApproval(false);\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }, [onApprove, setRequestedApproval]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    isActive: isCardActive,\n    isFinished: isFinished && sousId !== 0,\n    children: [pool.stakingTokenName === 'CSWAP' && /*#__PURE__*/_jsxDEV(StyledCardAccent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 45\n    }, this), isFinished && sousId !== 0 && /*#__PURE__*/_jsxDEV(PoolFinishedSash, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 38\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '24px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n        isFinished: isFinished && sousId !== 0,\n        children: [isOldSyrup && '[OLD]', \" \", tokenName, \" \", TranslateString(348, 'Pool')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '8px',\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            src: `/images/tokens/${image || tokenName}.png`,\n            width: 64,\n            height: 64,\n            alt: tokenName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), account && harvest && !isOldSyrup && /*#__PURE__*/_jsxDEV(HarvestButton, {\n          disabled: !earnings.toNumber() || pendingTx,\n          text: pendingTx ? 'Collecting' : 'Harvest',\n          onClick: async () => {\n            setPendingTx(true);\n            await onReward();\n            setPendingTx(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), !isOldSyrup ? /*#__PURE__*/_jsxDEV(BalanceAndCompound, {\n        children: [/*#__PURE__*/_jsxDEV(Balance, {\n          value: getBalanceNumber(earnings, tokenDecimals),\n          isDisabled: isFinished\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this), sousId === 9 && account && harvest && /*#__PURE__*/_jsxDEV(HarvestButton, {\n          disabled: !earnings.toNumber() || pendingTx,\n          text: pendingTx ? TranslateString(999, 'Compounding') : TranslateString(999, 'Compound'),\n          onClick: onPresentCompound\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(OldSyrupTitle, {\n        hasBalance: accountHasStakedBalance\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Label, {\n        isFinished: isFinished && sousId !== 0,\n        text: `${tokenName} Earned`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        justifyContent: \"space-between\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          style: {\n            fontSize: '24px'\n          },\n          children: [TranslateString(10001, 'Deposit Fee'), \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          bold: true,\n          style: {\n            fontSize: '24px'\n          },\n          children: [pool.depositFee, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledCardActions, {\n        children: [!account && /*#__PURE__*/_jsxDEV(UnlockButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 24\n        }, this), account && (needsApproval && !isOldSyrup ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            disabled: isFinished || requestedApproval,\n            onClick: handleApprove,\n            fullWidth: true,\n            children: `Approve ${stakingTokenName}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            disabled: stakedBalance.eq(new BigNumber(0)) || pendingTx,\n            onClick: isOldSyrup ? async () => {\n              setPendingTx(true);\n              await onUnstake('0');\n              setPendingTx(false);\n            } : onPresentWithdraw,\n            children: `Unstake ${stakingTokenName}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(StyledActionSpacer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 17\n          }, this), !isOldSyrup && /*#__PURE__*/_jsxDEV(IconButton, {\n            disabled: isFinished && sousId !== 0,\n            onClick: onPresentDeposit,\n            children: /*#__PURE__*/_jsxDEV(AddIcon, {\n              color: \"background\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledDetails, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: [TranslateString(736, 'APR'), \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), isFinished || isOldSyrup || !apy || (apy === null || apy === void 0 ? void 0 : apy.isNaN()) || !(apy === null || apy === void 0 ? void 0 : apy.isFinite()) ? '-' : /*#__PURE__*/_jsxDEV(Balance, {\n          fontSize: \"14px\",\n          isDisabled: isFinished,\n          value: apy === null || apy === void 0 ? void 0 : apy.toNumber(),\n          decimals: 2,\n          unit: \"%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledDetails, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            role: \"img\",\n            \"aria-label\": stakingTokenName,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [TranslateString(384, 'Your Stake'), \":\", /*#__PURE__*/_jsxDEV(Image, {\n                src: `/images/tokens/${stakingTokenName}.png`,\n                width: 20,\n                height: 20,\n                alt: \"CSWAP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 15\n              }, this), ' ']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Balance, {\n          fontSize: \"14px\",\n          isDisabled: isFinished,\n          value: getBalanceNumber(stakedBalance)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n      projectLink: projectLink,\n      totalStaked: totalStaked,\n      blocksRemaining: blocksRemaining,\n      isFinished: isFinished,\n      blocksUntilStart: blocksUntilStart,\n      poolCategory: poolCategory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PoolCard, \"uSI95usSKCPmNaenJSQtkF760/0=\", false, function () {\n  return [useI18n, useERC20, useWallet, useBlock, useSousApprove, useSousStake, useSousUnstake, useSousHarvest, useModal, useModal, useModal];\n});\n\n_c2 = PoolCard;\nconst PoolFinishedSash = styled.div`\n  background-image: url('/images/pool-finished-sash.svg');\n  background-position: top right;\n  background-repeat: not-repeat;\n  height: 135px;\n  position: absolute;\n  right: -24px;\n  top: -24px;\n  width: 135px;\n`;\n_c3 = PoolFinishedSash;\nconst StyledCardActions = styled.div`\n  display: flex;\n  justify-content: center;\n  margin: 16px 0;\n  width: 100%;\n  box-sizing: border-box;\n`;\n_c4 = StyledCardActions;\nconst BalanceAndCompound = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-direction: row;\n`;\n_c5 = BalanceAndCompound;\nconst StyledActionSpacer = styled.div`\n  height: ${props => props.theme.spacing[4]}px;\n  width: ${props => props.theme.spacing[4]}px;\n`;\n_c6 = StyledActionSpacer;\nconst StyledDetails = styled.div`\n  display: flex;\n  font-size: 14px;\n`;\n_c7 = StyledDetails;\nexport default PoolCard;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"StyledCardAccent\");\n$RefreshReg$(_c2, \"PoolCard\");\n$RefreshReg$(_c3, \"PoolFinishedSash\");\n$RefreshReg$(_c4, \"StyledCardActions\");\n$RefreshReg$(_c5, \"BalanceAndCompound\");\n$RefreshReg$(_c6, \"StyledActionSpacer\");\n$RefreshReg$(_c7, \"StyledDetails\");","map":{"version":3,"sources":["C:/Users/lol/Desktop/cswap-core/cswap-frontend/src/views/Profit/components/PoolCard.tsx"],"names":["BigNumber","React","useCallback","useState","styled","keyframes","Button","IconButton","useModal","AddIcon","Image","Flex","Text","useWallet","UnlockButton","Label","useERC20","useSousApprove","useI18n","useSousStake","useSousUnstake","useBlock","getBalanceNumber","useSousHarvest","Balance","QuoteToken","PoolCategory","DepositModal","WithdrawModal","CompoundModal","CardTitle","Card","OldSyrupTitle","HarvestButton","CardFooter","RainbowLight","StyledCardAccent","div","PoolCard","pool","sousId","image","tokenName","stakingTokenName","stakingTokenAddress","projectLink","harvest","apy","tokenDecimals","poolCategory","totalStaked","startBlock","endBlock","isFinished","userData","stakingLimit","depositFee","isBnbPool","BINANCE","TranslateString","stakingTokenContract","account","block","onApprove","onStake","onUnstake","onReward","requestedApproval","setRequestedApproval","pendingTx","setPendingTx","allowance","stakingTokenBalance","stakedBalance","earnings","pendingReward","blocksUntilStart","Math","max","blocksRemaining","isOldSyrup","SYRUP","accountHasStakedBalance","toNumber","needsApproval","isCardActive","convertedLimit","multipliedBy","pow","onPresentDeposit","isGreaterThan","onPresentCompound","onPresentWithdraw","handleApprove","txHash","e","console","error","padding","marginBottom","display","alignItems","flex","fontSize","eq","isNaN","isFinite","PoolFinishedSash","StyledCardActions","BalanceAndCompound","StyledActionSpacer","props","theme","spacing","StyledDetails"],"mappings":"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","sourcesContent":["import BigNumber from 'bignumber.js'\r\nimport React, { useCallback, useState } from 'react'\r\nimport styled, { keyframes } from 'styled-components'\r\nimport { Button, IconButton, useModal, AddIcon, Image, Flex, Text } from '@gameswapfinance/uikit'\r\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\r\nimport UnlockButton from 'components/UnlockButton'\r\nimport Label from 'components/Label'\r\nimport { useERC20 } from 'hooks/useContract'\r\nimport { useSousApprove } from 'hooks/useApprove'\r\nimport useI18n from 'hooks/useI18n'\r\nimport { useSousStake } from 'hooks/useStake'\r\nimport { useSousUnstake } from 'hooks/useUnstake'\r\nimport useBlock from 'hooks/useBlock'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { useSousHarvest } from 'hooks/useHarvest'\r\nimport Balance from 'components/Balance'\r\nimport { QuoteToken, PoolCategory } from 'config/constants/types'\r\nimport { Pool } from 'state/types'\r\nimport DepositModal from './DepositModal'\r\nimport WithdrawModal from './WithdrawModal'\r\nimport CompoundModal from './CompoundModal'\r\nimport CardTitle from './CardTitle'\r\nimport Card from './Card'\r\nimport OldSyrupTitle from './OldSyrupTitle'\r\nimport HarvestButton from './HarvestButton'\r\nimport CardFooter from './CardFooter'\r\n\r\nconst RainbowLight = keyframes`\r\n  0% {\r\n    background-position: 0% 50%;\r\n  }\r\n  50% {\r\n    background-position: 100% 50%;\r\n  }\r\n  100% {\r\n    background-position: 0% 50%;\r\n  }\r\n`\r\n\r\nconst StyledCardAccent = styled.div`\r\n  background: linear-gradient(\r\n    45deg,\r\n    rgba(255, 0, 0, 1) 0%,\r\n    rgba(255, 154, 0, 1) 10%,\r\n    rgba(208, 222, 33, 1) 20%,\r\n    rgba(79, 220, 74, 1) 30%,\r\n    rgba(63, 218, 216, 1) 40%,\r\n    rgba(47, 201, 226, 1) 50%,\r\n    rgba(28, 127, 238, 1) 60%,\r\n    rgba(95, 21, 242, 1) 70%,\r\n    rgba(186, 12, 248, 1) 80%,\r\n    rgba(251, 7, 217, 1) 90%,\r\n    rgba(255, 0, 0, 1) 100%\r\n  );\r\n  background-size: 300% 300%;\r\n  animation: ${RainbowLight} 2s linear infinite;\r\n  border-radius: 16px;\r\n  filter: blur(6px);\r\n  position: absolute;\r\n  top: -2px;\r\n  right: -2px;\r\n  bottom: -2px;\r\n  left: -2px;\r\n  z-index: -1;\r\n`\r\n\r\ninterface PoolWithApy extends Pool {\r\n  apy: BigNumber,\r\n  depositFee?: BigNumber\r\n}\r\n\r\ninterface HarvestProps {\r\n  pool: PoolWithApy\r\n}\r\n\r\nconst PoolCard: React.FC<HarvestProps> = ({ pool }) => {\r\n  const {\r\n    sousId,\r\n    image,\r\n    tokenName,\r\n    stakingTokenName,\r\n    stakingTokenAddress,\r\n    projectLink,\r\n    harvest,\r\n    apy,\r\n    tokenDecimals,\r\n    poolCategory,\r\n    totalStaked,\r\n    startBlock,\r\n    endBlock,\r\n    isFinished,\r\n    userData,\r\n    stakingLimit,\r\n    depositFee,\r\n  } = pool\r\n  // Pools using native BNB behave differently than pools using a token\r\n  const isBnbPool = poolCategory === PoolCategory.BINANCE\r\n  const TranslateString = useI18n()\r\n  const stakingTokenContract = useERC20(stakingTokenAddress)\r\n  const { account } = useWallet()\r\n  const block = useBlock()\r\n  const { onApprove } = useSousApprove(stakingTokenContract, sousId)\r\n  const { onStake } = useSousStake(sousId, isBnbPool)\r\n  const { onUnstake } = useSousUnstake(sousId)\r\n  const { onReward } = useSousHarvest(sousId, isBnbPool)\r\n\r\n  const [requestedApproval, setRequestedApproval] = useState(false)\r\n  const [pendingTx, setPendingTx] = useState(false)\r\n\r\n  const allowance = new BigNumber(userData?.allowance || 0)\r\n  const stakingTokenBalance = new BigNumber(userData?.stakingTokenBalance || 0)\r\n  const stakedBalance = new BigNumber(userData?.stakedBalance || 0)\r\n  const earnings = new BigNumber(userData?.pendingReward || 0)\r\n\r\n  const blocksUntilStart = Math.max(startBlock - block, 0)\r\n  const blocksRemaining = Math.max(endBlock - block, 0)\r\n  const isOldSyrup = stakingTokenName === QuoteToken.SYRUP\r\n  const accountHasStakedBalance = stakedBalance?.toNumber() > 0\r\n  const needsApproval = !accountHasStakedBalance && !allowance.toNumber() && !isBnbPool\r\n  const isCardActive = isFinished && accountHasStakedBalance\r\n\r\n  const convertedLimit = new BigNumber(stakingLimit).multipliedBy(new BigNumber(10).pow(tokenDecimals))\r\n  const [onPresentDeposit] = useModal(\r\n    <DepositModal\r\n      max={stakingLimit && stakingTokenBalance.isGreaterThan(convertedLimit) ? convertedLimit : stakingTokenBalance}\r\n      onConfirm={onStake}\r\n      tokenName={stakingLimit ? `${stakingTokenName} (${stakingLimit} max)` : stakingTokenName}\r\n    />,\r\n  )\r\n\r\n  const [onPresentCompound] = useModal(\r\n    <CompoundModal earnings={earnings} onConfirm={onStake} tokenName={stakingTokenName} />,\r\n  )\r\n\r\n  const [onPresentWithdraw] = useModal(\r\n    <WithdrawModal max={stakedBalance} onConfirm={onUnstake} tokenName={stakingTokenName} />,\r\n  )\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    try {\r\n      setRequestedApproval(true)\r\n      const txHash = await onApprove()\r\n      // user rejected tx or didn't go thru\r\n      if (!txHash) {\r\n        setRequestedApproval(false)\r\n      }\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }, [onApprove, setRequestedApproval])\r\n\r\n  return (\r\n\r\n    <Card isActive={isCardActive} isFinished={isFinished && sousId !== 0}>\r\n      {pool.stakingTokenName === 'CSWAP' && <StyledCardAccent />}\r\n      {isFinished && sousId !== 0 && <PoolFinishedSash />}\r\n      <div style={{ padding: '24px' }}>\r\n        <CardTitle isFinished={isFinished && sousId !== 0}>\r\n          {isOldSyrup && '[OLD]'} {tokenName} {TranslateString(348, 'Pool')}\r\n        </CardTitle>\r\n        <div style={{ marginBottom: '8px', display: 'flex', alignItems: 'center' }}>\r\n          <div style={{ flex: 1 }}>\r\n            <Image src={`/images/tokens/${image || tokenName}.png`} width={64} height={64} alt={tokenName} />\r\n          </div>\r\n          {account && harvest && !isOldSyrup && (\r\n            <HarvestButton\r\n              disabled={!earnings.toNumber() || pendingTx}\r\n              text={pendingTx ? 'Collecting' : 'Harvest'}\r\n              onClick={async () => {\r\n                setPendingTx(true)\r\n                await onReward()\r\n                setPendingTx(false)\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n        {!isOldSyrup ? (\r\n          <BalanceAndCompound>\r\n            <Balance value={getBalanceNumber(earnings, tokenDecimals)} isDisabled={isFinished} />\r\n            {sousId === 9 && account && harvest && (\r\n              <HarvestButton\r\n                disabled={!earnings.toNumber() || pendingTx}\r\n                text={pendingTx ? TranslateString(999, 'Compounding') : TranslateString(999, 'Compound')}\r\n                onClick={onPresentCompound}\r\n              />\r\n            )}\r\n          </BalanceAndCompound>\r\n        ) : (\r\n          <OldSyrupTitle hasBalance={accountHasStakedBalance} />\r\n        )}\r\n        <Label isFinished={isFinished && sousId !== 0} text={`${tokenName} Earned`} />\r\n        <Flex justifyContent=\"space-between\">\r\n        <Text style={{ fontSize: '24px' }}>{TranslateString(10001, 'Deposit Fee')}:</Text>\r\n        <Text bold style={{ fontSize: '24px' }}>\r\n          {pool.depositFee}%\r\n        </Text>\r\n      </Flex>\r\n        <StyledCardActions>\r\n          {!account && <UnlockButton />}\r\n          {account &&\r\n            (needsApproval && !isOldSyrup ? (\r\n              <div style={{ flex: 1 }}>\r\n                <Button disabled={isFinished || requestedApproval} onClick={handleApprove} fullWidth>\r\n                  {`Approve ${stakingTokenName}`}\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <Button\r\n                  disabled={stakedBalance.eq(new BigNumber(0)) || pendingTx}\r\n                  onClick={\r\n                    isOldSyrup\r\n                      ? async () => {\r\n                          setPendingTx(true)\r\n                          await onUnstake('0')\r\n                          setPendingTx(false)\r\n                        }\r\n                      : onPresentWithdraw\r\n                  }\r\n                >\r\n                  {`Unstake ${stakingTokenName}`}\r\n                </Button>\r\n                <StyledActionSpacer />\r\n                {!isOldSyrup && (\r\n                  <IconButton disabled={isFinished && sousId !== 0} onClick={onPresentDeposit}>\r\n                    <AddIcon color=\"background\" />\r\n                  </IconButton>\r\n                )}\r\n              </>\r\n            ))}\r\n        </StyledCardActions>\r\n        <StyledDetails>\r\n          <div style={{ flex: 1 }}>{TranslateString(736, 'APR')}:</div>\r\n          {isFinished || isOldSyrup || !apy || apy?.isNaN() || !apy?.isFinite() ? (\r\n            '-'\r\n          ) : (\r\n            <Balance fontSize=\"14px\" isDisabled={isFinished} value={apy?.toNumber()} decimals={2} unit=\"%\" />\r\n          )}\r\n        </StyledDetails>\r\n        <StyledDetails>\r\n          <div style={{ flex: 1 }}>\r\n            <span role=\"img\" aria-label={stakingTokenName}>\r\n            <div style={{ flex: 1 }}>\r\n              {TranslateString(384, 'Your Stake')}:\r\n              <Image src={`/images/tokens/${stakingTokenName}.png`} width={20} height={20} alt=\"CSWAP\" />{' '}\r\n              \r\n            </div>\r\n            \r\n            </span>\r\n            \r\n          </div>\r\n          <Balance fontSize=\"14px\" isDisabled={isFinished} value={getBalanceNumber(stakedBalance)} />\r\n        </StyledDetails>\r\n      </div>\r\n      <CardFooter\r\n        projectLink={projectLink}\r\n        totalStaked={totalStaked}\r\n        blocksRemaining={blocksRemaining}\r\n        isFinished={isFinished}\r\n        blocksUntilStart={blocksUntilStart}\r\n        poolCategory={poolCategory}\r\n      />\r\n    </Card>\r\n  )\r\n}\r\n\r\nconst PoolFinishedSash = styled.div`\r\n  background-image: url('/images/pool-finished-sash.svg');\r\n  background-position: top right;\r\n  background-repeat: not-repeat;\r\n  height: 135px;\r\n  position: absolute;\r\n  right: -24px;\r\n  top: -24px;\r\n  width: 135px;\r\n`\r\n\r\nconst StyledCardActions = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 16px 0;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n`\r\n\r\nconst BalanceAndCompound = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  flex-direction: row;\r\n`\r\n\r\nconst StyledActionSpacer = styled.div`\r\n  height: ${(props) => props.theme.spacing[4]}px;\r\n  width: ${(props) => props.theme.spacing[4]}px;\r\n`\r\n\r\nconst StyledDetails = styled.div`\r\n  display: flex;\r\n  font-size: 14px;\r\n`\r\n\r\nexport default PoolCard\r\n"]},"metadata":{},"sourceType":"module"}